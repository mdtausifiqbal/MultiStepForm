<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.5.0/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="css/index.css">
    <script src="js/index.js"></script>
    <title>FormProgress</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        .container {
            width: 100%;
            min-height: 100vh;
        }

        .container div.content {
            display: flex;
            height: 100%;
            flex-direction: column;
            padding: 20px 0px;
        }
        label.error{
            font-size: 12.8px;
            color:red;
        }
    </style>
</head>

<body>
    <div class="container">
        <div class="content">
            <div class="w-100 px-3">
                <div class="form-progress" id="indicator">
                    <div class="progress">
                        <div class="progress-bar" role="progressbar" style="width: 0%;" aria-valuenow="1"
                            aria-valuemin="1" aria-valuemax="1"></div>
                    </div>
                    <div class="progress-info">
                        <div class="progress-text bg-primary">1</div>
                        <div class="progress-text bg-light">2</div>
                        <div class="progress-text bg-light">3</div>
                    </div>
                </div>
            </div>
            <form action="" class="forms needs-validation">
                <fieldset>
                    <h1 class="form-title">Pesonal Information</h1>
                    <div class="form-group">
                        <label for="full_name">Full Name</label>
                        <input type="text" class="form-control" name="full_name" id="full_name" required>
                    </div>
                    <div class="form-group">
                        <label for="fathers_name">Father's Name</label>
                        <input type="text" class="form-control" id="fathers_name" name="fathers_name" required>
                    </div>
                    <div class="form-group">
                        <label for="dob">Date of Birth</label>
                        <input type="date" class="form-control" name='dob' id='dob' required>
                    </div>
                    <div class="form-group">
                        <label for="caste">Caste</label>
                        <select name="caste" id="caste" class="custom-select" required>
                            <option style="display:none;" selected></option>
                            <option value="OBC">OBC</option>
                            <option value="General">General</option>
                            <option value="SC">SC</option>
                            <option value="ST">ST</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="bloodgroup">Blood Group</label>
                        <select name="bloodgroup" id="bloodgroup" class="custom-select">
                            <option value="A+">A+</option>
                            <option value="A-">A-</option>
                            <option value="B+">B+</option>
                            <option value="B-">B-</option>
                            <option value="AB+">AB+</option>
                            <option value="AB-">AB-</option>
                            <option value="O+">O+</option>
                            <option value="O-">O-</option>
                        </select>
                    </div>
                </fieldset>
                <fieldset>
                    <h1 class="form-title">Contact Details</h1>
                    <div class="form-group">
                        <label for="tel">Mobile No.</label>
                        <input type="phone" class="form-control" id="mobile" pattern='^\d{10}$' name='phone'></input>
                    </div>
                    <div class="form-group">
                        <label for="altmobile">Alternate Mobile No.</label>
                        <input type="tel" class="form-control" id="altmobile" pattern='^\d{10}$'
                            name='altphone'></input>
                    </div>
                    <div class="form-group">
                        <label for="email">Email Id</label>
                        <input type="email" name="email" id="email" class="form-control">
                        <div class="invalid-feedback">
                            Please enter valid email address.
                        </div>
                    </div>
                </fieldset>
                <fieldset>
                    <h1 class="form-title">Address Details</h1>
                    <div class="form-group">
                        <label for="house">House/ Plot/ Flat No.</label>
                        <input type="text" class="form-control" id="house" name='house'>
                    </div>
                    <div class="form-group">
                        <label for="landmark">Landmark</label>
                        <input type="text" class="form-control" id="landmark" name="landmark">
                    </div>
                    <div class="form-group">
                        <label for="area">Area</label>
                        <input type="text" class="form-control" id="area" name="area">
                    </div>
                    <div class="form-group">
                        <label for="city">City</label>
                        <input type="text" class="form-control" id="city" name="city">
                    </div>
                    <div class="form-group">
                        <label for="district">District</label>
                        <input type="text" class="form-control" id="district" name="district">
                    </div>
                    <div class="form-group">
                        <label for="state">State</label>
                        <input type="text" class="form-control" id="state" name="state">
                    </div>
                    <div class="form-group">
                        <label for="pincode">Pincode</label>
                        <input type="number" class="form-control" id="pincode" name="pincode">
                    </div>
                </fieldset>
                <div class="btn-group my-3">
                    <button class="btn btn-primary prev" type="button">Previous</button>
                    <button class="btn btn-warning next" type="button">Next</button>
                    <button class="btn btn-success submit">Submit</button>
                </div>
            </form>
        </div>
    </div>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.4/umd/popper.min.js">
    </script>
    <script type="text/javascript"
        src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.5.0/js/bootstrap.min.js"></script>
    <script src="https://cdn.jsdelivr.net/jquery.validation/1.16.0/jquery.validate.min.js"></script>
    <script src="https://cdn.jsdelivr.net/jquery.validation/1.16.0/additional-methods.min.js"></script>


    <script>
        $(document).ready(function () {
            var progress = FormProgress($("#indicator"), 3, 1);
            progress.setSize("30px");
            // var forms = document.getElementsByClassName('needs-validation');
            // var form = forms[0];
            // var fieldset = form.getElementsByTagName('fieldset')[0];
            // $('form.forms').validate();
            $("button.prev").click(function () {
                progress.back();
            });
            $("button.next").click(function () {
                let current = progress.currentProgress;
                // console.log(current);
                let currentFieldset = $('.forms fieldset:nth-child('+progress.currentProgress+")");
                let valid = true;
                currentFieldset.find("input, select").each(function(){
                    // $(this).validate();
                    let temp_valid = $(this).valid();
                    if(!temp_valid){
                        valid = temp_valid;
                        $(this).attr('class',$(this).attr('class')+" was-validated");
                    }
                });
                if(valid){
                    progress.next();
                }else{
                    // $('form.forms').attr('class',$('form.forms').attr('class')+' was-validated');
                }
            });
            // var forms = document.getElementsByClassName('needs-validation');
            // // Loop over them and prevent submission
            // var validation = Array.prototype.filter.call(forms, function (form) {
            //     form.addEventListener('submit', function (event) {
            //         if (form.checkValidity() === false) {
            //             event.preventDefault();
            //             event.stopPropagation();
            //         }
            //         form.classList.add('was-validated');
            //     }, false);
            // });
        });
    </script>
</body>

</html>